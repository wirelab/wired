#!/usr/bin/env ruby

if ARGV.empty?
  raise "Provide an app name"
else
  if ARGV[0].length < 3
    raise "Name needs to be longer than 3 characters. (#{ARGV[0]} is #{ARGV[0].length})"
  end

  if ARGV[0].length > 20
    raise "Name can't be longer than 20 characters. (#{ARGV[0]} is #{ARGV[0].length})"
  end
end

require File.expand_path(File.join('..', 'lib', 'wired', 'generators', 'app_generator'), File.dirname(__FILE__))
require File.expand_path(File.join('..', 'lib', 'wired', 'actions'), File.dirname(__FILE__))
require File.expand_path(File.join('..', 'lib', 'wired', 'app_builder'), File.dirname(__FILE__))

templates_root = File.expand_path(File.join("..", "templates"), File.dirname(__FILE__))
Wired::AppGenerator.source_root templates_root
Wired::AppGenerator.source_paths << Rails::Generators::AppGenerator.source_root << templates_root

Wired::AppGenerator.start
